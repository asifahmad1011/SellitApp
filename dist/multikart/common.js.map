{"version":3,"sources":["webpack:///./src/app/pages/search/search.component.html","webpack:///./src/app/pages/search/search.component.scss","webpack:///./src/app/pages/search/search.component.ts","webpack:///./src/app/pages/search/search.service.ts"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["module.exports = \"\\r\\n<section class=\\\"search-block\\\">\\r\\n   \\r\\n                <div class=\\\"container\\\">\\r\\n                  <div class=\\\"row\\\">\\r\\n                    <div class=\\\"col-lg-6 offset-lg-3\\\">\\r\\n                      <form [formGroup]=\\\"searchForm\\\" class=\\\"form-header\\\">\\r\\n                        <div class=\\\"form-group\\\">\\r\\n                          <input type=\\\"text\\\" (keyup)=\\\"searchTerm.next($event)\\\"  class=\\\"form-control\\\" formControlName=\\\"search\\\" id=\\\"exampleInputPassword1\\\" placeholder=\\\"Search Here...\\\">\\r\\n                        </div>\\r\\n                        <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\"><i class=\\\"fa fa-search\\\"></i></button>\\r\\n                      </form>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </div>\\r\\n\\r\\n  <div *ngIf=\\\"searchResults\\\">\\r\\n    <div class=\\\"results\\\" >\\r\\n      <div class=\\\"repo\\\" *ngFor=\\\"let result of paginationElements | paginate: { itemsPerPage: 12, currentPage: page }\\\">\\r\\n          <div class=\\\"card-deck\\\">\\r\\n              <div class=\\\"card\\\">\\r\\n              <img loading=\\\"lazy\\\" src=\\\"../../assets/{{result.image}}\\\"\\r\\n                  width=\\\"200\\\"\\r\\n                  height=\\\"auto\\\"\\r\\n                  alt=\\\"image\\\"\\r\\n              />\\r\\n              <h4><a href=\\\"/home/right-sidebar/product/{{result.product_id}}\\\">{{result.product_name}}</a></h4>\\r\\n              <p>{{result.description}}</p>\\r\\n              <p>Price: {{result.price}}</p>\\r\\n          </div>\\r\\n          </div> \\r\\n      </div>\\r\\n  </div>\\r\\n      <pagination-controls (pageChange)=\\\"page = $event\\\"></pagination-controls>\\r\\n  </div>\\r\\n \\r\\n  <div *ngIf=\\\"errorMessage\\\" class=\\\"errorMessage\\\">\\r\\n      <h2>Error</h2>\\r\\n      <p class=\\\"error\\\">{{errorMessage}}</p>\\r\\n  </div>\\r\\n\\r\\n\\r\\n</section>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIuLi9zcmMvYXBwL3BhZ2VzL3NlYXJjaC9zZWFyY2guY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\r\nimport { Subject, throwError, of } from 'rxjs';\r\nimport { map, debounceTime, distinctUntilChanged, switchMap, catchError, retryWhen, retry } from \"rxjs/operators\";\r\nimport {SearchService} from \"./search.service\";\r\n\r\n@Component({\r\n  selector: 'app-search',\r\n  templateUrl: './search.component.html',\r\n  styleUrls: ['./search.component.scss']\r\n})\r\nexport class SearchComponent implements OnInit {\r\n\r\n  public loading: boolean;\r\n  public searchTerm = new Subject<string>();\r\n  public baseUrl = \"/api/v1/product/\";\r\n  public searchResults: any;\r\n  public paginationElements: any;\r\n  public errorMessage: any;\r\n  public page:any;\r\n  \r\n  constructor(private searchService: SearchService) { }\r\n  \r\n  public searchForm = new FormGroup({\r\n    search: new FormControl('', Validators.required),\r\n  });\r\n\r\n  public search(){\r\n    this.searchTerm.pipe(\r\n      map((e: any) => {\r\n        console.log(e.target.value);\r\n        return e.target.value\r\n      }),\r\n      debounceTime(400),\r\n      distinctUntilChanged(),\r\n      switchMap(term => {\r\n        this.loading = true;\r\n        return this.searchService._searchEntries(term)\r\n      }),\r\n      catchError((e) => {\r\n        //handle the error and return it\r\n        console.log(e)\r\n        this.loading = false;\r\n        this.errorMessage = e.message;\r\n        return throwError(e);\r\n      }),\r\n    ).subscribe(v => {\r\n        this.loading = false;\r\n        //return the results and pass the to the paginate module\r\n        this.searchResults = v;\r\n        this.paginationElements = this.searchResults;\r\n    })\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.search();\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { Observable, observable, of, empty } from 'rxjs';\r\nimport { map } from \"rxjs/operators\";\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SearchService {\r\n\r\n  public baseUrl = \"http://localhost:3000/api/v1/product/\";\r\n  public searchResults: any;\r\n\r\n  constructor(private httpClient: HttpClient) { }\r\n\r\n\r\n  //makes the HTTP request to get the resources and returns the response as observable;  \r\n  public searchEntries(product): Observable<any>{\r\n    if (product === \"\" ){\r\n      console.log(\"Not defined\");\r\n      return of(null);\r\n      //return empty();\r\n    }else{\r\n      let params = {product : product}\r\n      console.log(params);\r\n      return this.httpClient.get(this.baseUrl + product).pipe(\r\n        map(response => {\r\n          console.log(response)\r\n          return this.searchResults = response[\"products\"];\r\n        })\r\n      );\r\n    }\r\n    \r\n  }\r\n\r\n  //returns the response for the first method\r\n  public _searchEntries(product){\r\n    return this.searchEntries(product);\r\n  }\r\n}\r\n"],"sourceRoot":""}